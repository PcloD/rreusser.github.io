<!DOCTYPE html>
<html class='no-js sticky'>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <title>Quick shell commands with Alfred, AppleScript, and Growl | Ricky Reusser</title>
    <meta name="site" content="Ricky Reusser" />
    <meta name="og:site_name" content="Ricky Reusser" />
    <meta name="title" content="Quick shell commands with Alfred, AppleScript, and Growl" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Quick shell commands with Alfred, AppleScript, and Growl" />
    <meta name="twitter:site" content="@rickyreusser" />
    <meta name="og:title" content="Quick shell commands with Alfred, AppleScript, and Growl" />
    <meta content='width=device-width, initial-scale=1' name='viewport'>
    <link href="../../../../stylesheets/application-576d5dfe.css" rel="stylesheet" type="text/css" />
    <link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/styles/default.min.css' rel='stylesheet'>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  </head>
  <body>
    <div class='wrapper'>
      <nav class='navbar' id='navbar'>
        <a class="menu-toggle" href="/"><span class='burger'></span>
        <span class='burger'></span>
        <span class='burger'></span>
        </a>
        <ul id='menu'>
          <li class='top'>
            <a class="brand" href="/">rickyreusser.com
            </a>
          </li>
          <li>
            <div class='padding-container'></div>
            <a href="/tags/science"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 width="72px" height="72px" viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve">
              <g>
                <circle fill="#ffffff" cx="37.915" cy="34.252" r="2.165"/>
                <circle fill="#ffffff" cx="35.086" cy="34.252" r="2.165"/>
                <circle fill="#ffffff" cx="37.915" cy="37.08" r="2.165"/>
                <circle fill="#ffffff" cx="35.086" cy="37.08" r="2.165"/>
                <circle fill="#ffffff" cx="59.5" cy="43.666" r="3.888"/>
                <ellipse fill="none" stroke="#ffffff" stroke-width="3" stroke-miterlimit="10" cx="36.5" cy="35.666" rx="33.333" ry="11.167"/>
                <circle fill="#ffffff" cx="18.39" cy="51.134" r="3.889"/>
                
                  <ellipse transform="matrix(-0.4996 0.8662 -0.8662 -0.4996 85.7024 20.9105)" fill="none" stroke="#ffffff" stroke-width="3" stroke-miterlimit="10" cx="36.812" cy="35.207" rx="33.333" ry="11.167"/>
                <circle fill="#ffffff" cx="32.201" cy="12.24" r="3.889"/>
                
                  <ellipse transform="matrix(-0.4988 -0.8667 0.8667 -0.4988 23.7217 86.0485)" fill="none" stroke="#ffffff" stroke-width="3" stroke-miterlimit="10" cx="36.74" cy="36.166" rx="33.333" ry="11.167"/>
              </g>
            </svg>
            <span class='label'>science</span>
            </a>
          </li>
          <li>
            <div class='padding-container'></div>
            <a href="/tags/dev"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 width="72px" height="72px" viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve">
              <g>
                <path fill="#ffffff" d="M25.295,28.367l-14.941,7.489l14.941,7.42v4.284l-18.58-9.784v-3.886l18.58-9.784V28.367z"/>
                <path fill="#ffffff" d="M41.468,15.914h3.34L30.991,55.308h-3.357L41.468,15.914z"/>
                <path fill="#ffffff" d="M47.06,28.367v-4.261l18.58,9.784v3.886l-18.58,9.784v-4.284l14.941-7.42L47.06,28.367z"/>
              </g>
            </svg>
            <span class='label'>dev</span>
            </a>
          </li>
          <li>
            <div class='padding-container'></div>
            <a id="fun" href="/tags/fun"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 width="72px" height="72px" viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve">
              <g>
                <path fill="none" stroke="#ffffff" stroke-width="3" stroke-miterlimit="10" d="M54.566,58.368"/>
                <path fill="#ffffff" d="M54.244,40.188l-7.595,4.933L25.393,13.908L2.23,58.5h67.697L54.244,40.188z M25.707,19.157l7.821,11.502
                  l-1.919,5.119l-5.349-7.932l-3.208,5.65l-1.992-5.403L25.707,19.157z"/>
              </g>
            </svg>
            <span class='label'>fun</span>
            </a>
          </li>
          <li>
            <div class='padding-container'></div>
            <a href="https://github.com/rreusser"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 width="72px" height="72px" viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve">
            <path fill-rule="evenodd" clip-rule="evenodd" fill="#ffffff" d="M36.21,8.152C20.488,8.152,7.738,20.9,7.738,36.629
            	c0,12.579,8.158,23.251,19.474,27.017c1.424,0.262,1.943-0.618,1.943-1.372c0-0.676-0.024-2.467-0.038-4.843
            	c-7.921,1.721-9.592-3.817-9.592-3.817c-1.295-3.289-3.161-4.165-3.161-4.165c-2.586-1.767,0.195-1.73,0.195-1.73
            	c2.857,0.201,4.361,2.934,4.361,2.934c2.54,4.352,6.664,3.096,8.287,2.366c0.258-1.84,0.994-3.095,1.808-3.807
            	c-6.323-0.719-12.971-3.161-12.971-14.072c0-3.109,1.11-5.65,2.932-7.641c-0.293-0.721-1.271-3.616,0.278-7.536
            	c0,0,2.392-0.766,7.831,2.919c2.271-0.632,4.707-0.947,7.128-0.958c2.417,0.011,4.855,0.326,7.13,0.958
            	c5.434-3.685,7.82-2.919,7.82-2.919c1.555,3.92,0.578,6.815,0.283,7.536c1.826,1.99,2.926,4.531,2.926,7.641
            	c0,10.938-6.656,13.345-13,14.05c1.023,0.88,1.934,2.617,1.934,5.273c0,3.807-0.035,6.878-0.035,7.812
            	c0,0.761,0.514,1.647,1.959,1.369c11.305-3.772,19.455-14.438,19.455-27.014C64.686,20.9,51.936,8.152,36.21,8.152z"/>
            </svg>
            <span class='label'>github</span>
            </a>
          </li>
          <li>
            <div class='padding-container'></div>
            <a href="/about"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            	 width="72px" height="72px" viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve">
              <path fill="#ffffff" d="M53.5,55.333c-9.984-2.463-11.438-6.349-10.25-8.583c1.041-1.96,2.268-1.829,5.464-9.761
                c0.094,0.036,0.182,0.084,0.282,0.106c1.588,0.356,3.365-1.132,3.965-3.326c0.598-2.191-0.207-4.261-1.794-4.617
                c-0.083-0.019-0.168-0.012-0.252-0.021C54.667,8.497,38.667,5.997,30.167,11.247c-3.917-2.359-12.25,1.917-10.068,17.885
                c-0.084,0.009-0.155,0.002-0.238,0.021c-1.587,0.356-2.392,2.426-1.794,4.617c0.6,2.194,2.377,3.683,3.965,3.326
                c0.101-0.022,0.188-0.07,0.282-0.106c3.196,7.932,4.271,7.988,5.312,9.948c1.188,2.234,0.231,5.982-9.745,8.477
                C4.546,58.747,5.527,65.5,5.527,65.5H35.5h30C65.5,65.5,66.666,58.581,53.5,55.333z"/>
            </svg>
            <span class='label'>about me</span>
            </a>
          </li>
        </ul>
        <div class='content'></div>
        <div class='inner-content'>
          <h5 class='abbrev'>
            <span>Quick shell commands with Alfred, AppleScript, and Growl</span>
          </h5>
        </div>
      </nav>
      <article>
        <section class='frontmatter' data-abbrvd-target='#navbar'>
          <div class='container'>
            <div class='outer-container'>
              <div class='inner-container'>
                <h1 class='title'>Quick shell commands with Alfred, AppleScript, and Growl</h1>
                <h5 class='metadata'>
                  <span class='author'>Ricky Reusser</span>
                  <br>
                  <span class='published-at'>February 11, 2015</span>
                  <br>
                  <div class='tags'>
                    <span class='tag'><a href="/tags/dev/">#dev</a></span>
                    <span class='tag'><a href="/tags/alfred/">#alfred</a></span>
                    <span class='tag'><a href="/tags/shell-scripting/">#shell-scripting</a></span>
                    <span class='tag'><a href="/tags/applescript/">#applescript</a></span>
                    <span class='tag'><a href="/tags/growl/">#growl</a></span>
                  </div>
                </h5>
              </div>
            </div>
          </div>
        </section>
        <section class='content'>
          <p>I need to track time on my current project, so I started using the <a href="https://github.com/samg/timetrap">timetrap gem</a>. It&rsquo;s pretty great. Briefest possible synopsis of what you get:</p>
          <div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1&#x000A;2&#x000A;3&#x000A;4&#x000A;5&#x000A;6&#x000A;7&#x000A;8&#x000A;9&#x000A;10&#x000A;11&#x000A;12</pre></td><td class="code"><pre><span class="gp">$ </span>t <span class="k">in &#x000A;  </span>Checked into sheet <span class="s2">"important project"</span>.&#x000A;<span class="gp">$ </span>t out&#x000A;  Checked out of sheet <span class="s2">"important project"</span>.&#x000A;<span class="gp">$ </span>t d&#x000A;  Timesheet: important project&#x000A;      Day                Start      End        Duration   Notes&#x000A;      Wed Feb 11, 2015   08:30:37 - 10:25:39   1:55:02    &#x000A;                         10:36:49 - 11:59:00   1:22:11    &#x000A;                                               3:17:13&#x000A;      ---------------------------------------------------------&#x000A;      Total                                    3:17:13</pre></td></tr></tbody></table>
          </div>
          
          <p>Quick and easy! Except my workflow becomes:</p>
          
          <ol>
          <li>Open a new terminal window</li>
          <li>Type two or three characters</li>
          <li>Close the terminal window</li>
          </ol>
          
          <p>which starts to seem silly kinda quickly. One solution is to use <a href="http://www.alfredapp.com/">Alfred</a> to type shell commands without opening up a new window. Seems promising, but this isn&rsquo;t much better since you&rsquo;re still left with a stray terminal window—or worse, a new fullscreen terminal window that&rsquo;s slow to open and slow to close due to the laggy Mission Control transition speed.</p>
          
          <h3>A Solution</h3>
          
          <p>My solution is to get fancy and use AppleScript to run the command and send the output to a <a href="http://growl.info/">Growl</a> notification.  So let&rsquo;s start with the result. In the end, I want to type this:</p>
          
          <p><img alt="Alfred usage" src="https://s3.amazonaws.com/rickyreusser.com/alfred-usage.png" /></p>
          
          <p>and end up with a growl notification that looks like this:</p>
          
          <p><img alt="Growl notification" src="https://s3.amazonaws.com/rickyreusser.com/growl.png" /></p>
          
          <p>How do we accomplish that? I&rsquo;m just going to quote my code without explanation. There&rsquo;s not much to it. I don&rsquo;t even know AppleScript. I mostly just merged the built-in Alfred Terminal command code and code from the <a href="http://growl.info/documentation/applescript-support.php">Growl AppleScript Documentation page</a>. My addition is that it runs a bash command, sourcing the bash profile and redirecting stderr to stdout. It then sends the output to either a Growl noficiation or a plain old alert box, depending on whether Growl is available.</p>
          <div class="highlight applescript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1&#x000A;2&#x000A;3&#x000A;4&#x000A;5&#x000A;6&#x000A;7&#x000A;8&#x000A;9&#x000A;10&#x000A;11&#x000A;12&#x000A;13&#x000A;14&#x000A;15&#x000A;16&#x000A;17&#x000A;18&#x000A;19&#x000A;20&#x000A;21&#x000A;22&#x000A;23&#x000A;24&#x000A;25&#x000A;26&#x000A;27&#x000A;28&#x000A;29&#x000A;30&#x000A;31&#x000A;32&#x000A;33&#x000A;34&#x000A;35&#x000A;36&#x000A;37&#x000A;38&#x000A;39&#x000A;40&#x000A;41</pre></td><td class="code"><pre><span class="k">on</span> <span class="nv">outputResultRoutine</span><span class="p">(</span><span class="nv">growlDescription</span><span class="p">,</span><span class="w"> </span><span class="nv">growlContent</span><span class="p">)</span><span class="w">&#x000A;  </span><span class="k">tell</span><span class="w"> </span><span class="nb">application</span><span class="w"> </span><span class="s2">"System Events"</span><span class="w">&#x000A;    </span><span class="k">set</span><span class="w"> </span><span class="nv">isRunning</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="se">¬&#x000A;</span><span class="w">      </span><span class="p">(</span><span class="nb">count</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="p">(</span><span class="nb">every</span><span class="w"> </span><span class="nv">process</span><span class="w"> </span><span class="nb">whose</span><span class="w"> </span><span class="nb">bundle</span><span class="w"> </span><span class="na">identifier</span><span class="w"> </span><span class="ow">is</span><span class="w"> </span><span class="s2">"com.Growl.GrowlHelperApp"</span><span class="p">))</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w">&#x000A;  </span><span class="k">end</span><span class="w"> </span><span class="k">tell</span><span class="w">&#x000A;&#x000A;  </span><span class="k">if</span><span class="w"> </span><span class="nv">isRunning</span><span class="w"> </span><span class="k">then</span><span class="w">&#x000A;    </span><span class="k">tell</span><span class="w"> </span><span class="nb">application</span><span class="w"> </span><span class="na">id</span><span class="w"> </span><span class="s2">"com.Growl.GrowlHelperApp"</span><span class="w">&#x000A;      </span><span class="k">set</span><span class="w"> </span><span class="nb">the</span><span class="w"> </span><span class="nv">allNotificationsList</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="se">¬&#x000A;</span><span class="w">        </span><span class="p">{</span><span class="s2">"Shell output"</span><span class="p">}</span><span class="w">&#x000A;&#x000A;      </span><span class="k">set</span><span class="w"> </span><span class="nb">the</span><span class="w"> </span><span class="nv">enabledNotificationsList</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="se">¬&#x000A;</span><span class="w">        </span><span class="p">{</span><span class="s2">"Shell output"</span><span class="p">}</span><span class="w">&#x000A;&#x000A;      </span><span class="nb">register</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nb">application</span><span class="w"> </span><span class="se">¬&#x000A;</span><span class="w">        </span><span class="s2">"Alfred Shell Command"</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">notifications</span><span class="w"> </span><span class="nv">allNotificationsList</span><span class="w"> </span><span class="se">¬&#x000A;</span><span class="w">        </span><span class="nv">default</span><span class="w"> </span><span class="nv">notifications</span><span class="w"> </span><span class="nv">enabledNotificationsList</span><span class="w"> </span><span class="se">¬&#x000A;</span><span class="w">        </span><span class="nv">icon</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nb">application</span><span class="w"> </span><span class="s2">"Script Editor"</span><span class="w">&#x000A;&#x000A;      </span><span class="nv">notify</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="na">name</span><span class="w"> </span><span class="se">¬&#x000A;</span><span class="w">        </span><span class="s2">"Shell output"</span><span class="w"> </span><span class="na">title</span><span class="w"> </span><span class="se">¬&#x000A;</span><span class="w">        </span><span class="nv">growlDescription</span><span class="w"> </span><span class="nv">description</span><span class="w"> </span><span class="se">¬&#x000A;</span><span class="w">        </span><span class="nv">growlContent</span><span class="w"> </span><span class="nb">application</span><span class="w"> </span><span class="na">name</span><span class="w"> </span><span class="s2">"Alfred Shell Command"</span><span class="w">&#x000A;&#x000A;    </span><span class="k">end</span><span class="w"> </span><span class="k">tell</span><span class="w">&#x000A;  </span><span class="k">else</span><span class="w">&#x000A;    </span><span class="nb">display alert</span><span class="w"> </span><span class="nv">growlDescription</span><span class="w"> </span><span class="nv">message</span><span class="w"> </span><span class="nv">growlContent</span><span class="w">&#x000A;  </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">&#x000A;</span><span class="k">end</span><span class="w"> </span><span class="nv">outputResultRoutine</span><span class="w">&#x000A;&#x000A;</span><span class="k">on</span> <span class="nv">alfred_script</span><span class="p">(</span><span class="nv">q</span><span class="p">)</span><span class="w">&#x000A;  </span><span class="k">if</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="k">then</span><span class="w">&#x000A;    </span><span class="k">set</span><span class="w"> </span><span class="nv">result</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nb">do shell script</span><span class="w"> </span><span class="s2">"bash -c \"source ~/.bash_profile &amp;&amp; "</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nv">q</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="s2">" 2&gt;&amp;1 &amp;\""</span><span class="w">&#x000A;    </span><span class="nv">outputResultRoutine</span><span class="p">(</span><span class="nv">q</span><span class="p">,</span><span class="w"> </span><span class="nv">result</span><span class="p">)</span><span class="w">&#x000A;  </span><span class="k">else</span><span class="w">&#x000A;    </span><span class="k">tell</span><span class="w"> </span><span class="nb">application</span><span class="w"> </span><span class="s2">"Terminal"</span><span class="w">&#x000A;      </span><span class="nb">activate</span><span class="w">&#x000A;      </span><span class="nv">do</span><span class="w"> </span><span class="nv">script</span><span class="w"> </span><span class="nv">q</span><span class="w">&#x000A;    </span><span class="k">end</span><span class="w"> </span><span class="k">tell</span><span class="w">&#x000A;  </span><span class="k">end</span><span class="w">&#x000A;</span><span class="k">end</span><span class="w"> </span><span class="nv">alfred_script</span><span class="w">&#x000A;</span></pre></td></tr></tbody></table>
          </div>
          
          <p>Copy/paste this into your Alfred setup, and you&rsquo;re good to go!</p>
          
          <p><img alt="Alfred setup" src="https://s3.amazonaws.com/rickyreusser.com/alfred-setup.png" /></p>
        </section>
      </article>
      <div class='push'></div>
    </div>
    <section class='footer'>
      <div class='container'>
        <div class='article-footer'>
          <div id='disqus_thread'></div>
          <script>
              var disqus_shortname = 'rickyreusser';
              (function() {
                  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
          </script>
          <noscript>
            Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
          </noscript>
        </div>
        <!--div class="sharing">
        <a href="http://www.twitter.com/share?url=<%= data['site']['siteurl'] %><%= current_article.url %>&amp;text=<%= current_article.title %> by <%= data['site']['twitter_id'] %>" title="Share this post on Twitter" data-lang="en" onclick="return !window.open(this.href, 'Twitter', 'width=640,height=300')"><span class="socicon socicon-twitter fgcolor"></span></a>
        <a target="_blank" onclick="return !window.open(this.href, 'Facebook', 'width=640,height=300')" href="http://www.facebook.com/sharer/sharer.php?u=<%= data['site']['siteurl'] %><%= current_article.url %>" title="Share this post on Facebook"><span class="socicon socicon-facebook fgcolor"></span></a>
        <a href="http://plus.google.com/share?url=<%= data['site']['siteurl'] %><%= current_article.url %>" target="_blank" onclick="return !window.open(this.href, 'Google +', 'width=640,height=300')" title="Share this post on Google +"><span class="socicon socicon-google fgcolor"></span></a>
        </div-->
      </div>
    </section>
    <script src="../../../../javascripts/all-5962ed70.js" type="text/javascript"></script>
    <script>
      var _gaq=[['_setAccount','UA-50197543-4'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>
    <script>
      $('code').each(function(i,el) {
        var $el = $(el);
        var html = $el.html();
        if( html.match(/^\${1,2}.*\${1,2}$/) || html.match(/^\\\(.*\\\)$/) ){
          var container = $('<span>');
          container.html(html);
          $el.replaceWith(container);
        }
      });
    </script>
  </body>
</html>
