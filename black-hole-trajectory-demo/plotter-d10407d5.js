(function(){var t,i,s,n,o,e,r,h,a,c={}.hasOwnProperty,x=function(t,i){function s(){this.constructor=t}for(var n in i)c.call(i,n)&&(t[n]=i[n]);return s.prototype=i.prototype,t.prototype=new s,t.__super__=i.prototype,t};h=function(t){var i,s,n,o,e,r,h,a,c;for(o=Math.floor(Math.log(t)/Math.log(10)),r=t/Math.pow(10,o),n=1/0,s=.5,c=[1,2,5,10],h=0,a=c.length;a>h;h++)i=c[h],e=Math.abs(r-i),n>e&&(n=e,s=i);return s*Math.pow(10,o)},a=function(t,i,s,n,o){var e,r,h,a,c,x,u,m,d;return e=.5522848,r=n/2*e,h=o/2*e,x=i-n/2,d=s-o/2,c=i,m=s,a=i+n/2,u=s+o/2,t.moveTo(x,m),t.bezierCurveTo(x,m-h,c-r,d,c,d),t.bezierCurveTo(c+r,d,a,m-h,a,m),t.bezierCurveTo(a,m+h,c+r,u,c,u),t.bezierCurveTo(c-r,u,x,m+h,x,m),t.closePath()},e=function(){function t(t){var i;this.selector=t,i=$(this.selector),this.ctx=i[0].getContext("2d"),this.ctx.canvas.height=this.ctx.canvas.clientHeight*window.devicePixelRatio,this.ctx.canvas.width=this.ctx.canvas.clientWidth*window.devicePixelRatio,this.ctx.canvas.style.position="relative",i.disableTextSelect(),i.bind("contextmenu",function(){return function(){return!1}}(this)),this.axes=[],this.bind_zoom()}return t.prototype.resize=function(t,i){var s,n,o,e;for(this.ctx.canvas.width=t*window.devicePixelRatio,this.ctx.canvas.height=i*window.devicePixelRatio,$(this.ctx.canvas).width(t).height(i),this.ctx.width,e=this.axes,n=0,o=e.length;o>n;n++)s=e[n],s.imax=this.ctx.canvas.width,s.jmin=this.ctx.canvas.height;return s.square(),this.show()},t.prototype.bind_zoom=function(){var t;return t=this.gca(),this.ctx.canvas.addEventListener("mousedown",function(t){return function(i){var s,n,o,e;return s=i.offsetX*window.devicePixelRatio,n=i.offsetY*window.devicePixelRatio,t.gca().store_limits(),i.ctrlKey||i.shiftKey?(o=function(i){var o,e,r,h;return r=i.offsetX*window.devicePixelRatio,h=i.offsetY*window.devicePixelRatio,o=r-s,e=h-n,i.ctrlKey||i.shiftKey?(i.stopPropagation(),i.preventDefault(),i.ctrlKey&&t.gca().zoom(e),i.shiftKey&&t.gca().pan(o,e),t.gca().clear(),t.draw()):void 0},e=function(){return document.removeEventListener("mouseup",e,!1),document.removeEventListener("mousemove",o,!1)},document.addEventListener("mouseup",e,!1),document.addEventListener("mousemove",o,!1)):void 0}}(this),!1)},t.prototype.add_axis=function(){var t;return t=new i(this),t.imin=0,t.imax=this.ctx.canvas.width,t.jmin=this.ctx.canvas.height,t.jmax=0,this.axes.push(t)},t.prototype.draw=function(){var t,i,s,n,o;for(n=this.axes,o=[],i=0,s=n.length;s>i;i++)t=n[i],o.push(t.draw());return o},t.prototype.show=function(){return this.draw()},t.prototype.gca=function(){return this.axes[0]},t.prototype.grid=function(t,i){return null==t&&(t=10),null==i&&(i=10),this.gca().grid(t,i)},t.prototype.axis=function(t,i,s,n){return this.gca().set_limits(t,i,s,n)},t.prototype.plot=function(t,i,s){return null==s&&(s={}),this.gca().add_artist(new r(t,i,s))},t.prototype.add_artist=function(t){return this.gca().add_artist(t)},t.prototype.onmove=function(t){return this.onclick(t,t,t)},t.prototype.onclick=function(t,i,s){return this.ctx.canvas.addEventListener("mousedown",function(n){return function(o){var e,r;if(!o.shiftKey&&!o.ctrlKey)return e=function(t){return i?i.bind(n)(t):void 0},r=function(t){return s&&s.bind(n)(t),document.removeEventListener("mouseup",r,!1),document.removeEventListener("mousemove",e,!1)},document.addEventListener("mouseup",r,!1),document.addEventListener("mousemove",e,!1),t.bind(n)(o)}}(this),!1)},t.prototype.clf=function(){var t,i,s,n,o,e,r,h;for(e=this.axes,i=0,n=e.length;n>i;i++)t=e[i],t.purge();for(r=this.axes,h=[],s=0,o=r.length;o>s;s++)t=r[s],h.push(t.clear());return h},t}(),t=function(){function t(t,i){var s,n,o,e,r;for(null==i&&(i={}),s={color:"#000000",fc:void 0},r=["color","fc"],o=0,e=r.length;e>o;o++)n=r[o],this[n]=t.hasOwnProperty(n)?t[n]:i.hasOwnProperty(n)?i[n]:s[n]}return t.prototype.predraw=function(){return this.ctx.beginPath()},t.prototype.postdraw=function(t){return void 0===this.fc?this.ctx.fillStyle=[0,0,0,0]:(this.ctx.fillStyle=this.fc,this.ctx.fill()),void 0===this.color?this.ctx.strokeStyle=void 0:(this.ctx.strokeStyle=this.color,this.ctx.stroke()),this.ctx.strokeStyle="#000000",this.ctx.fillStyle=[0,0,0,0],t?t():void 0},t.prototype.draw=function(){},t}(),o=function(t){function i(t,s,n){this.nx=t,this.ny=s,null==n&&(n={}),i.__super__.constructor.call(this,n,{color:"#ccc"})}return x(i,t),i.prototype.draw=function(t){var i,s,n,o,e,r,a,c,x,u;for(s=h((this.axis.ymax-this.axis.ymin)/this.ny),i=s,o=Math.floor(this.axis.xmin/i)+1,a=Math.floor(this.axis.ymin/s)+1,e=Math.floor(this.axis.xmax/i),c=Math.floor(this.axis.ymax/s),this.ctx.lineWidth=window.devicePixelRatio,this.ctx.beginPath(),n=x=o;e>=o?e>=x:x>=e;n=e>=o?++x:--x)this.ctx.moveTo(this.axis.i(n*i),this.axis.jmin),this.ctx.lineTo(this.axis.i(n*i),this.axis.jmax);for(r=u=a;c>=a?c>=u:u>=c;r=c>=a?++u:--u)this.ctx.moveTo(this.axis.imin,this.axis.j(r*s)),this.ctx.lineTo(this.axis.imax,this.axis.j(r*s));return this.postdraw(t)},i}(t),n=function(t){function i(t,s,n,o){this.x=t,this.y=s,this.radius=n,null==o&&(o={}),i.__super__.constructor.call(this,o)}return x(i,t),i.prototype.draw=function(t){return this.ctx.beginPath(),this.ctx.arc(this.axis.i(this.x),this.axis.j(this.y),this.axis.di(this.radius),0,2*Math.PI,!1),this.postdraw(t)},i}(t),s=function(t){function i(t,s,n,o,e){this.x=t,this.y=s,this.width=n,this.height=o,null==e&&(e={}),i.__super__.constructor.call(this,e)}return x(i,t),i.prototype.draw=function(t){return this.ctx.beginPath(),this.ctx.rect(this.axis.i(this.x),this.axis.j(this.y),this.axis.di(this.width),this.axis.dj(this.height)),this.postdraw(t)},i}(t),r=function(t){function i(t,s,n){this.xs=t,this.ys=s,null==n&&(n={}),i.__super__.constructor.call(this,n)}return x(i,t),i.prototype.draw=function(t){var i,s,n,o;for(this.ctx.beginPath(),i=!0,s=n=0,o=this.xs.length;o>=0?o>n:n>o;s=o>=0?++n:--n)_.isFinite(this.xs[s])&&_.isFinite(this.ys[s])?i?(i=!1,this.ctx.moveTo(this.axis.i(this.xs[s]),this.axis.j(this.ys[s]))):this.ctx.lineTo(this.axis.i(this.xs[s]),this.axis.j(this.ys[s])):i=!0;return this.postdraw(t)},i}(t),i=function(){function t(t,i){this.plot=t,this.padding=null!=i?i:15,this.ctx=this.plot.ctx,this.imin=this.imax=this.jmin=this.jmax=0,this.xmin=-1,this.xmax=1,this.ymin=-1,this.ymax=1,this.grid_instance=void 0,this.artists=[]}return t.prototype.store_limits=function(){return this.xmin_old=this.xmin,this.xmax_old=this.xmax,this.ymin_old=this.ymin,this.ymax_old=this.ymax},t.prototype.square=function(){var t,i,s,n;return t=1,s=this.ymax-this.ymin,i=s*t*(this.imax-this.imin)/(this.jmin-this.jmax),n=.5*(this.xmin+this.xmax),this.xmin=n-.5*i,this.xmax=n+.5*i},t.prototype.pan=function(t,i){var s,n;return s=t/(this.imax-this.imin)*(this.xmax-this.xmin),n=i/(this.jmax-this.jmin)*(this.ymax-this.ymin),this.xmin=this.xmin_old-s,this.xmax=this.xmax_old-s,this.ymin=this.ymin_old-n,this.ymax=this.ymax_old-n},t.prototype.zoom=function(t){var i,s,n,o,e;return s=(this.xmax_old+this.xmin_old)/2,n=(this.xmax_old-this.xmin_old)/2,o=(this.ymax_old+this.ymin_old)/2,e=(this.ymax_old-this.ymin_old)/2,i=Math.exp(-t/(this.jmax-this.jmin)*10),this.xmin=s-n*i,this.ymin=o-e*i,this.xmax=s+n*i,this.ymax=o+e*i},t.prototype.purge=function(){return this.artists=[]},t.prototype.clear=function(){return this.ctx.clearRect(this.imin,this.jmin,this.imax-this.imin,this.jmax-this.jmin)},t.prototype.dx=function(t){return(this.xmax-this.xmin)/(this.imax-this.imin)*t},t.prototype.dy=function(t){return(this.ymax-this.ymin)/(this.jmax-this.jmin)*t},t.prototype.x=function(t){return this.xmin+(this.xmax-this.xmin)*(t-this.imin)/(this.imax-this.imin)},t.prototype.y=function(t){return this.ymin+(this.ymax-this.ymin)*(t-this.jmin)/(this.jmax-this.jmin)},t.prototype.di=function(t){return(this.imax-this.imin)/(this.xmax-this.xmin)*t},t.prototype.dj=function(t){return(this.jmax-this.jmin)/(this.ymax-this.ymin)*t},t.prototype.i=function(t){return this.imin+(this.imax-this.imin)*(t-this.xmin)/(this.xmax-this.xmin)},t.prototype.j=function(t){return this.jmin+(this.jmax-this.jmin)*(t-this.ymin)/(this.ymax-this.ymin)},t.prototype.draw=function(){return void 0!==this.grid_instance&&this.grid_instance.draw(),this.draw_counter=0,this.drawNext()},t.prototype.drawNext=function(){return this.draw_counter>=this.artists.length?void 0:this.artists[this.draw_counter].draw(function(t){return function(){return t.draw_counter+=1,t.drawNext()}}(this))},t.prototype.grid=function(t,i){var s;return null==t&&(t=10),null==i&&(i=10),s=new o(t,i),s.axis=this,s.ctx=this.ctx,this.grid_instance=s},t.prototype.add_artist=function(t){return t.axis=this,t.ctx=this.ctx,this.artists.push(t)},t.prototype.set_limits=function(t,i,s,n){this.xmin=t,this.xmax=i,this.ymin=s,this.ymax=n},t}(),$(function(){return window.Plot=e,window.Axis=i,window.Artist=t,window.Circle=n,window.Box=s,window.Polyline=r})}).call(this);